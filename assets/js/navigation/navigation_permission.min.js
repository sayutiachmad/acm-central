function reloadTable(){$("#reload_table").click(function(a){grid.ajax.reload()})}function save_data(a){disable_checkbox(a);var e=$(a).data("pcode"),t=a.checked;$.ajax({url:base_url+"navigation/save_permission",type:"POST",data:{pcode:e,checked:t}}).done(function(e){JSON.parse(e).result?(notif_msg="Berhasil menyimpan hak akses pengguna!",showNotification("bg-green",notif_msg,"top","right",null,null)):(notif_msg="Oops! terjadi kesalahan saat menyimpan data",showNotification("alert-danger",notif_msg,"top","right",null,null),$(a).attr("checked",!t))}).fail(function(){notif_msg="Oops! terjadi kesalahan saat mengirim data",showNotification("alert-danger",notif_msg,"top","right",null,null),$(a).attr("checked",!t)}).always(function(){enable_checkbox(a)})}function disable_checkbox(a){$(a).attr("disabled","true").removeClass("chk-col-blue").addClass("chk-col-grey")}function enable_checkbox(a){$(a).removeAttr("disabled").removeClass("chk-col-grey").addClass("chk-col-blue")}var grid,tbl=$("#table_for_data"),notif_msg,last_parent=0,last_nav=0;jQuery(document).ready(function(a){grid=tbl.DataTable({responsive:!0,paging:!1,searching:!1,ajax:{url:base_url+"navigation/get_navigation_permission"},columnDefs:[{targets:0,defaultContent:"",data:null,width:"2%",sortable:!1,searchable:!1},{targets:1,data:"navigation_name",defaultContent:"",width:"30%",className:"text-left",render:function(a,e,t,n){var i=a;return t.parent>0&&(i=last_parent>0&&last_nav==t.parent?"&#x257C;&#x257C;  "+a:"&#x257C;  "+a),last_parent=t.parent,last_nav=t.id_navigation,i}},{targets:"_all",defaultContent:"",data:null,sortable:!1,orderable:!1,className:"text-center",width:"8%",render:function(e,t,n,i){if(i.col>0){var l=tbl[0].rows[0].cells[i.col],o=a(l).data("identifier"),r=n.id_navigation+"-"+o,s="";if(null!=n.pcode){s=n.pcode.split(",").indexOf(r)>-1?"checked":""}var c='<div class="checkbox checkbox-custom checkbox-inline">';return c+='<input id="'+r+'" type="checkbox" class="filled-in chk-col-blue nav-permission" data-pcode="'+r+'" '+s+"/>",c+='<label for="'+n.id_navigation+"-"+o+'"></label>',c+="</div>"}}}],order:[]}),grid.on("order.dt search.dt",function(){grid.column(0,{search:"applied",order:"applied"}).nodes().each(function(a,e){a.innerHTML=e+1})}).draw(),a("#table_for_data tbody").on("change",".nav-permission",function(){save_data(this)}),reloadTable()});